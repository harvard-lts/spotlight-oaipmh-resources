#  2025-05-23: Added permalink for cte (VV)
#  2025-01-17: Added "- xpath-value: "//mods:relatedItem[@type='constituent']/mods:name"" to creator-contributor_tesim 
#              and "- xpath-value: "//mods:relatedItem[@type='constituent']/mods:name/mods:namePart"" creators-contributors_ssim 
#              for Forgotten Cities to pull in Jacoby, Thomas J.
#  2024-11-22: Added permalink for pickens (VV)
#  2024-09-23: Updated Soviet Pins title to Soviet and Post-Soviet Lapel Pins and added permalink for forgotten (VV)
#  2024-09-04: Added new path for rights: relatedItem/accessCondition so Creative Commons license would appear for Forgotten Cities
#  2024-07-17: Added permalink xpath for salt (VV)
#  2024-07-01: Removed permalink xpath for dcp aka Harvard Digital Collections aka HDC (VV)
#  2024-04-25: Added permalink xpath for kurdish (VV)
#  2024-04-12: Added permalink xpath for wwwk (VV)
#  2024-03-29: Added permalink xpaths for bls and pins (VV)
#  2024-01-11: Added permalink xpath for jeffry (VV)
#  2023-10-31: Renamed owning-institution_ssim to contributing-institution_ssim (VV)
#  2023-10-02: Updated permalink xpath for bta to include 'The' (VV)
#  2023-07-10: Added permalink xpath for coptica (VV)
#  2023-06-08: Added permalink xpath for bta (VV)
#  2023-06-06: Added permalink xpath for brewster (VV)
#  2023-05-26: Updated the title for amw (VV)
#              Added permalink for sba (VV)
#              Changed source-institution-digitization_tesim to source-institution-copy_tesim and kept the label with the non-hyperlinked link for accessibility. (VV)
#              Removed BTA xpath from additional-digital-items_tesim as they would like to use source-institution-copy instead. (VV)
#  2023-04-13: Added new xpath to additional-digital-items_tesim for BTA. If this is the preferred label, we can delete source-institution-digitization_tesim. (VV)
#              source-institution-digitization_tesim currently has label as well which is better for accessibility, but the link is not hyperlinked in CURIOSity. (VV)
#              Need to confirm with BTA which label and display is preferred. (VV)
#  2023-04-04: Added permalink xpath for amw (VV)
#  2023-02-21: Added permalink xpath for woc (VV)
#  2022-12-05: Merged BTA changes/additions with curiosity.yml (VV)
#              Renamed host-title_ssim to journal-title_ssim (VV)
#              Renamed digitization_ssim to digitizing-institution_ssim (VV)
#              Renamed biographical-historical_tesim to biographical-historical-note_tesim (VV)
#              Renamed norm-date_ssim to normalized-date_ssim (VV)
#              Renamed owner_ssim to owning-institution_ssim (VV)
#  2022-10-27: Added host-title_ssim to enable serial title facet for BTA. It will pick up the title of the immediate parent of the component. Test before implementing in a collection with Alma records. (RKW)
#              Changed norm_date_ssim to text substring function to just extract the year. Did not work; reverted.
#  2022-10-25: Removed unsuccessful creators-contributors-limited_ssim (RKW)
#              Added digitization_ssim to enable faceting by providers of digitization
#  2022-10-21: Added new tesim for biographical/historical note that lacks @displayLabel="Issuing Body Note" (RKW)
#              Excluded biographical/historical note from note_tesim
#              Edited archival-series xpaths to reduce complexity -- not working
#              Added xpaths to place of origin fields to pick up places with no type attribute.
#              Revised publisher xPaths 
#              Added owner_ssim
#  2022-10-13: Added unit-id_tesim to select the top-level--i.e., component--Component Unique Identifier in records from ArchivesSpace (RKW)
#              Added archival-series tesim and ssim to allow for display and facet in BTA
#              Added norm-date_ssim to enable a facet by the normalized start date for BTA
#              Replaced the publisher fields with xpath-only ones as an experiment
#              Replaced the place of origin fields with xpath-only ones as an experiment
#              Added creators-contributors-limited_ssim as a test to exclude names with certain roles
#              Replaced xpath-values in additional-digital-items_tesim (per VV)
#  2022-09-20: Updates for Black Teacher Archive: (RKW) 
#              Added new tesim field for Issuing Body Note
#              Excluded note w/displayLabel="Issuing Body Note" from note_tesim field
#              Added xpaths to tesim and ssim for originInfo/publisher in immediate relatedItem
#              Added xpaths to tesim and ssim for originInfo/place/placeTerm in immediate relatedItem 
#              Added new tesim field for note where @type="source characteristics"
#              Excluded note w/@type="source characteristics" from note_tesim field
#              Added new tesim field for source institution digitization
#              Added new xpath-values to creator-contributor_tesim and creators-contributors_ssim to pick up names in the immediate host relatedItem
#  2022-03-31: Added permalink xpath for wave (AVS)
#  2022-02-17: Added permalink xpath for hedda (VV)
#  2021-11-17: Added new field for the finding aid component link: finding-aid-component_tesim
#  2021-10-19: Added permalink xpath for saef (VV)
#  2021-05-13: Added relatedItem/name xpaths to creator/contributor fields to pick up names associated with collections in finding aid components (VV & RW)
#  2021-03-31: Added permalink xpath for story (VV)
#  2021-01-08: Added permalink xpath for bac (VV)
#  2020-12-01: Added shelf-location_tesim field mapping to enable EPJ to create browse categories for albums
#  2020-10-05: Updated title for ssb permalink. (VV)
#  2020-08-05: Added permalink xpaths for epj, horblit, and ssb (VV)
#  2020-05-07: Removed physicalLocation with the type="container" from appearing under the Places fields. (VV)
#              Added new Container field for physicalLocation with the type="container" (VV)
#              Added new Cite As field for notes with the type="preferred citation" and removed them from appearing under the Notes field. (VV)
#              Added peralink xpaths for currency and urban (VV)
#  2020-02-14: Added permalink xpaths for ham, dcp, and franceinamerica (VV)
#  2019-12-13: Changed the full_title_tesim delimiter to a semicolon and added it to the two full_title_tesim relatedItems (VV)
#  2019-01-04: Changed permalink xpaths for crimes and dag (RKW)
#  2018-11-27: Restrict subject terms to those from preferred thesauri; add series title (RKW)
#  2018-11-19: Corrected digitalFormat entries; Fixed error in style-period_tesim. (RKW)
#  2018-10-11: Added commented-out object-in-context permalinks for lap, contagion, exp, immigration, ww. Uncomment them once links exist and are confirmed. (RKW)
#  2018-10-09: Added object-in-context permalink for medieval-&-renaissance-manuscripts (RKW)
#  2018-10-02: Added object-in-context permalinks for crimes, dag, ihp, scarlet, ward (RKW) 
#  2018-08-23: Added draft segment for object-in-context (permalink), to be customized per collection (RKW)
#  2018-07-30: First VC production version (RKW)
#  2018-07-31: Temporarily changed repository_ssim and repository_tesim to select [@type='repository'] rather than [@displayLabel='Harvard repository'].
#                Change back after full reingest of all metadata sources. (RKW)
#
# Structure:
#  - spotlight-field: xxx
#    multivalue-breaks: "yes" (optional) - if you want repeatable values for a given field to be 
#        handled separately in a facet or to be displayed on separate lines in a record display.
#    default-value: xxx (optional)
#    delimiter: xxx (optional, what to separate all path values with.  Defaults to a space)
#    mods:
#        - path: xxx (repeatable - all path fields will be concatenated)
#          delimiter: " " (optional)
#          attribute: xxx (optional) - attribute, attribute-value, and mods-path+mods-value supply 
#             conditions which must be met for the spotlight-field to be created.
#             E.g., only create field if MODS element has @displayLabel where value = "collection".)
#          attribute-value: xxx (optional, but only used with attribute)
#          mods-path: xxx (optional)
#          mods-value: xxx (optional)
#          subpaths: (optional)
#            - subpath: xxx
#            - subpath: xxx
#    xpath: 
#        - xpath-value: xxx (repeatable)
#          xpath-namespace-prefix: xxx (optional)
#          xpath-namespace-def: xxx (optional)
#   
#  Documentation at https://github.com/harvard-library/spotlight-oaipmh-resources/wiki
#  
#  Multiterm field names need terms separated with dash, not underscore. Underscore is used 
#  1) by Stanford-defined baked-in fields and 2) for ssim, tesim, ssm suffixes, etc.   
#
#  Spotlight field names in YAML may not contain capital letters.
#
#  xPaths with multiple namespaces cannot be mapped. 
#  xPaths that address the a namespace within a mods:extension without including MODS will work, e.g., 
#  //cdwalite:cultureWrap/cdwalite:culture, //cdwalite:styleWrap/cdwalite:style, //cdwalite:indexingMaterialsTechSet/cdwalite:termMaterialsTech
#  
#  YML structure sensitive to the exact number of leading spaces.
#  Tabs will cause the ingest to fail.
#
#  Things left to do:
#
#  -- finding aid link is not readily identifiable in all MODS records. It may be necessary to alter LibraryCloud ingest to flag these in a way that YAML can recognize them.
#  -- subject/name currently includes only the 1st namePart, and subject/titleInfo only the title subelement. 
#        Additional subelements can't be correctly formatted if included with current capabilities.
#  -- consider separating alternate titles from main titles for tesim while still searching together if possible. This will make the list view more readable. 
#        Distinguish using the titleInfo type attribute, where values can be abbreviated, translated, alternative, or uniform. The primary title would lack a type attribute. 
#  -- vernacular script elements are messily duplicative when not all parts of script field are in the script 
#       (See in particular publishers, creation dates, notes.) Exactly duplicate strings will be suppressed from display, but values with any variation, e.g., punctuation will still display.
#  -- normalized-date_ssim is only applicable for records from ArchivesSpace and some Alma records. For Alma sourced dates, add mods:dateIssued encoding="marc".
#  -- Can we make a generic label for fields like Additional Digital Item and Permalink so they don't display as a naked link? This is bad accessibility.

- spotlight-field: unique-id_tesim
  mods:
      - path: recordInfo/recordIdentifier
    
- spotlight-field: full_title_tesim
  delimiter: " ; "
  mods:
      - path: titleInfo
        attribute: type
        attribute-value: '!uniform' 
        delimiter: " "
        subpaths:
          - subpath: nonSort
          - subpath: title
          - subpath: partNumber
          - subpath: partName 
      - path: titleInfo/subTitle
      - path: relatedItem
        attribute: type
        attribute-value: constituent
        delimiter: " ; "
        subpaths:
          - subpath: titleInfo/title
      - path: relatedItem
        attribute: type
        attribute-value: host
        delimiter: " ; "
        subpaths:
          - subpath: titleInfo/title

- spotlight-field: series_tesim
  multivalue-breaks: "yes"
  mods:
      - path: relatedItem
        attribute: type
        attribute-value: series      
        delimiter: ". "
        subpaths:
          - subpath: name/namePart
          - subpath: titleInfo/title
          - subpath: titleInfo/partName

- spotlight-field: series_ssim
  multivalue-breaks: "yes"
  mods:
      - path: relatedItem
        attribute: type
        attribute-value: series      
        delimiter: ". "
        subpaths:
          - subpath: name/namePart
          - subpath: titleInfo/title
          - subpath: titleInfo/partName

# - spotlight-field: archival-series_tesim
#  xpath:
#      - xpath-value: "//mods:relatedItem[/mods:mods/mods:relatedItem[@type='host']/mods:physicalDescription/mods:note[text()="series"]]/mods:titleInfo/mods:title"

# - spotlight-field: archival-series_ssim
#  xpath:
#      - xpath-value: "//mods:relatedItem[/mods:mods/mods:relatedItem[@type='host']/mods:physicalDescription/mods:note[text()="series"]]/mods:titleInfo/mods:title"

# Deliberately including role in display but not in facet, hence the slightly different field names.
# Need to add "/" between Creator and Contributor for both field names in Spotlight exhibit after initial ingest. 

- spotlight-field: creator-contributor_tesim
  multivalue-breaks: "yes"
  delimiter: "|"
  mods:
      - path: plain_name
        delimiter: ", "
        subpaths:
          - subpath: namePart
          - subpath: role/roleTerm
  xpath:
    - xpath-value: "/mods:mods/mods:relatedItem[@type='host']/mods:name/mods:namePart"
    - xpath-value: "//mods:relatedItem[@displayLabel='collection']/mods:name/mods:namePart"
    - xpath-value: "//mods:relatedItem[@type='constituent']/mods:name" 
    # The line above should include /mods:namePart like the others, but it was added for Forgotten Cities
    # to pull in Jacoby, Thomas J. which has two roles: creator and photographer. 
    # When /mods:namePart is added, neither role displays. Without it both roles appear but it displays as:
    # "Jacoby, Thomas J. creator photographer" which is not ideal but better than none.
    # Not sure if it is possible to display as: Jacoby, Thomas J., creator, photographer
        
- spotlight-field: creators-contributors_ssim
  multivalue-breaks: "yes"
  delimiter: "|"
  mods:
      - path: plain_name
        delimiter: ", "
        subpaths:
          - subpath: namePart
  xpath:
    - xpath-value: "/mods:mods/mods:relatedItem[@type='host']/mods:name/mods:namePart"
    - xpath-value: "//mods:relatedItem[@displayLabel='collection']/mods:name/mods:namePart"
    - xpath-value: "//mods:relatedItem[@type='constituent']/mods:name/mods:namePart"

# added journal-title_ssim to enable serial title facet for BTA. It will pick up the title of the immediate parent of the component. Test before implementing in a collection with Alma records.
- spotlight-field: journal-title_ssim
  xpath:
      - xpath-value: "/mods:mods/mods:relatedItem[@type='host']/mods:titleInfo/mods:title"

# Added contributing-institution_ssim to enable faceting by owner names 
- spotlight-field: contributing-institution_ssim
  multivalue-breaks: "yes"
  delimiter: "|"
  xpath:
      - xpath-value: "/mods:mods/mods:name[mods:role/mods:roleTerm='Owner']/mods:namePart"
      - xpath-value: "/mods:mods/mods:relatedItem[@type='host']/mods:name[mods:role/mods:roleTerm='Owner']/mods:namePart"

# Added digitizing-institution_ssim to enable faceting by providers of digitization
- spotlight-field: digitizing-institution_ssim
  multivalue-breaks: "yes"
  delimiter: "|"
  xpath:
      - xpath-value: "/mods:mods/mods:name[mods:role/mods:roleTerm='Provider of digitization']/mods:namePart"
      - xpath-value: "/mods:mods/mods:relatedItem[@type='host']/mods:name[mods:role/mods:roleTerm='Provider of digitization']/mods:namePart"

- spotlight-field: publisher_tesim
  multivalue-breaks: "yes"
  delimiter: "|"  
  xpath:
      - xpath-value: "/mods:mods/mods:originInfo/mods:publisher"
      - xpath-value: "/mods:mods/mods:relatedItem[@type='host']/mods:originInfo/mods:publisher"

- spotlight-field: publisher_ssim
  multivalue-breaks: "yes"
  xpath:
      - xpath-value: "/mods:mods/mods:originInfo/mods:publisher"
      - xpath-value: "/mods:mods/mods:relatedItem[@type='host']/mods:originInfo/mods:publisher"

- spotlight-field: container_tesim
  delimiter: ", " 
  mods:
      - path: location/physicalLocation
        attribute: type
        attribute-value: container

- spotlight-field: place-of-origin_tesim
  multivalue-breaks: "yes" 
  xpath:
      - xpath-value: "/mods:mods/mods:originInfo/mods:place/mods:placeTerm[@type!='code']"
      - xpath-value: "/mods:mods/mods:originInfo/mods:place/mods:placeTerm[not(@type)]"
      - xpath-value: "/mods:mods/mods:relatedItem[@type='host']/mods:originInfo/mods:place/mods:placeTerm[@type!='code']"
      - xpath-value: "/mods:mods/mods:relatedItem[@type='host']/mods:originInfo/mods:place/mods:placeTerm[not(@type)]"

- spotlight-field: place-of-origin_ssim
  multivalue-breaks: "yes"
  xpath:
      - xpath-value: "/mods:mods/mods:originInfo/mods:place/mods:placeTerm[@type!='code']"
      - xpath-value: "/mods:mods/mods:originInfo/mods:place/mods:placeTerm[not(@type)]"
      - xpath-value: "/mods:mods/mods:relatedItem[@type='host']/mods:originInfo/mods:place/mods:placeTerm[@type!='code']"
      - xpath-value: "/mods:mods/mods:relatedItem[@type='host']/mods:originInfo/mods:place/mods:placeTerm[not(@type)]"

- spotlight-field: date_tesim
  multivalue-breaks: "yes"
  mods:
      - path: originInfo/dateIssued
        attribute: '!point'
        attribute-value:       
      - path: originInfo/dateCreated
        attribute: '!point'
        attribute-value: 
      - path: originInfo/dateCaptured
        attribute: '!point'
        attribute-value: 
      - path: originInfo/copyrightDate
        attribute: '!point'
        attribute-value:  

- spotlight-field: date_ssim
  multivalue-breaks: "yes"
  mods:
      - path: originInfo/dateIssued
        attribute: '!point'
        attribute-value: 
      - path: originInfo/dateCreated
        attribute: '!point'
        attribute-value:       
      - path: originInfo/dateCaptured
        attribute: '!point'
        attribute-value: 
      - path: originInfo/copyrightDate
        attribute: '!point'
        attribute-value:  

# Enables a facet by the normalized start date. For display in Spotlight, use instead of Date for facet display, but use date_tesim for metadata display.
# Currently, this facet is only applicable for records from ArchivesSpace and some Alma records; therefore this facet is not applicable to all collections. 
# For Alma sourced dates, we will need to add and test mods:dateIssued encoding="marc".
- spotlight-field: normalized-date_ssim
  multivalue-breaks: "yes"
  delimiter: "|" 
  # The following line works, but it passes the whole string. 
  # We think the harvester is expecting a node instead of a string and therefore ignoring the substring function.
  # Either the harvester needs to accept strings OR upgrading to xpath2 will enable turning a string back into a node.
  # xpath:
  #      - xpath-value: "/mods:mods/mods:originInfo/mods:dateCreated[@point='start'][substring(text(),1,4)]"
  mods:
      - path: originInfo/dateCreated
        attribute: 'point'
        attribute-value: 'start'
      - path: originInfo/dateIssued
        attribute: 'point'
        attribute-value: 'start'
      - path: originInfo/dateCaptured
        attribute: 'point'
        attribute-value: 'start'
      - path: originInfo/copyrightDate
        attribute: 'point'
        attribute-value: 'start'
      - path: originInfo/dateOther
        attribute: 'point'
        attribute-value: 'start'

- spotlight-field: edition_tesim
  mods:
      - path: originInfo/edition

- spotlight-field: classification_tesim
  multivalue-breaks: "yes"
  mods:
      - path: classification
         
- spotlight-field: spotlight_upload_description_tesim
  delimiter: "|"
  mods: 
      - path: abstract

- spotlight-field: contents_tesim
  multivalue-breaks: "yes"
  mods:
      - path: tableOfContents
      
- spotlight-field: extent_tesim
  multivalue-breaks: "yes"
  mods:
      - path: physicalDescription/extent

- spotlight-field: digital-format_tesim
  multivalue-breaks: "yes"
  xpath: 
      - xpath-value: "//librarycloud:digitalFormat"
        xpath-namespace-prefix: "librarycloud"
        xpath-namespace-def: "http://hul.harvard.edu/ois/xml/ns/librarycloud"

- spotlight-field: digital-format_ssim
  multivalue-breaks: "yes"
  xpath: 
      - xpath-value: "//librarycloud:digitalFormat"
        xpath-namespace-prefix: "librarycloud"
        xpath-namespace-def: "http://hul.harvard.edu/ois/xml/ns/librarycloud"

- spotlight-field: harvard-repository_ssim
  multivalue-breaks: "yes"
  xpath: 
      - xpath-value: "//librarycloud:HarvardRepository"
        xpath-namespace-prefix: "librarycloud"
        xpath-namespace-def: "http://hul.harvard.edu/ois/xml/ns/librarycloud"
   
# default can be dropped in language fields below when default is confirmed set in all LibraryCloud ingest streams.

- spotlight-field: language_ssim
  default-value: unspecified or not applicable
  delimiter: "|"
  multivalue-breaks: "yes"
  xpath:
      - xpath-value: "/mods:mods/mods:language/mods:languageTerm[@type='text']"
      
- spotlight-field: language_tesim
  default-value: unspecified or not applicable
  multivalue-breaks: "yes"
  xpath:
      - xpath-value: "/mods:mods/mods:language/mods:languageTerm[@type='text']"

- spotlight-field: culture_tesim
  multivalue-breaks: "yes"
  xpath: 
      - xpath-value: "//cdwalite:culture"
        xpath-namespace-prefix: "cdwalite"
        xpath-namespace-def: "http://www.getty.edu/research/conducting_research/standards/cdwa/cdwalite"
  
- spotlight-field: culture_ssim
  multivalue-breaks: "yes"
  xpath: 
      - xpath-value: "//cdwalite:culture"
        xpath-namespace-prefix: "cdwalite"
        xpath-namespace-def: "http://www.getty.edu/research/conducting_research/standards/cdwa/cdwalite"
 
- spotlight-field: style-period_tesim
  multivalue-breaks: "yes"
  xpath: 
      - xpath-value: "//cdwalite:style"
        xpath-namespace-prefix: "cdwalite"
        xpath-namespace-def: "http://www.getty.edu/research/conducting_research/standards/cdwa/cdwalite"

- spotlight-field: style-period_ssim
  multivalue-breaks: "yes"
  xpath: 
      - xpath-value: "//cdwalite:style"
        xpath-namespace-prefix: "cdwalite"
        xpath-namespace-def: "http://www.getty.edu/research/conducting_research/standards/cdwa/cdwalite"
 
- spotlight-field: materials-techniques_ssim
  multivalue-breaks: "yes"
  xpath: 
      - xpath-value: "//cdwalite:termMaterialsTech"
        xpath-namespace-prefix: "cdwalite"
        xpath-namespace-def: "http://www.getty.edu/research/conducting_research/standards/cdwa/cdwalite"
 
- spotlight-field: materials-techniques_tesim
  multivalue-breaks: "yes"
  xpath: 
      - xpath-value: "//cdwalite:termMaterialsTech"
        xpath-namespace-prefix: "cdwalite"
        xpath-namespace-def: "http://www.getty.edu/research/conducting_research/standards/cdwa/cdwalite"

# Consider trying regex, either here or in LibraryCloud [source]@mods.xsl to identify additional Finding Aid links

- spotlight-field: finding-aid_tesim
  xpath:
      - xpath-value: "//mods:relatedItem[@otherType='Finding Aid']/mods:location/mods:url"

- spotlight-field: finding-aid-component_tesim
  xpath:
      - xpath-value: "//mods:relatedItem[@otherType='HOLLIS for Archival Discovery record']/mods:location/mods:url"
      
- spotlight-field: repository_ssim
  multivalue-breaks: "yes"
  xpath:
    - xpath-value: "/mods:mods/mods:location/mods:physicalLocation[@type='repository']"
    - xpath-value: "//mods:relatedItem[@type='host']/mods:location/mods:physicalLocation[@type='repository']"
    - xpath-value: "//mods:relatedItem[@type='constituent']/mods:location/mods:physicalLocation[@type='repository']"

#  Is there a way via xpath to associate shelfLocator with each of these in tesim only, 
#   without having the shelfLocator treated as a separate repository? 

- spotlight-field: repository_tesim
  multivalue-breaks: "yes"
  xpath: 
      - xpath-value: "/mods:mods/mods:location/mods:physicalLocation[@type='repository']"  
      - xpath-value: "//mods:relatedItem[@type='host']/mods:location/mods:physicalLocation[@type='repository']"
      - xpath-value: "//mods:relatedItem[@type='constituent']/mods:location/mods:physicalLocation[@type='repository']"

# Added to pull in album number for Early Photography of Japan, currently not displayed in any other site        
- spotlight-field: shelf-location_tesim
  multivalue-breaks: "yes"
  mods: 
      - path: location/shelfLocator

- spotlight-field: subjects_ssim
  multivalue-breaks: "yes"
  mods:
      - path: subject
        attribute: authority
        attribute-value: lcsh
        delimiter: "--"
        subpaths:
          - subpath: name/namePart
          - subpath: titleInfo/title
          - subpath: topic
          - subpath: geographic
          - subpath: temporal
          - subpath: genre
      - path: relatedItem/subject
        attribute: authority
        attribute-value: lcsh
        delimiter: "--"
        subpaths:
          - subpath: name/namePart
          - subpath: titleInfo/title
          - subpath: topic
          - subpath: geographic
          - subpath: temporal
          - subpath: genre
      - path: subject
        attribute: authority
        attribute-value: mesh
        delimiter: "--"
        subpaths:
          - subpath: name/namePart
          - subpath: titleInfo/title
          - subpath: topic
          - subpath: geographic
          - subpath: temporal
          - subpath: genre
      - path: relatedItem/subject
        attribute: authority
        attribute-value: mesh
        delimiter: "--"
        subpaths:
          - subpath: name/namePart
          - subpath: titleInfo/title
          - subpath: topic
          - subpath: geographic
          - subpath: temporal
          - subpath: genre
      - path: subject
        attribute: authority
        attribute-value: fast
        delimiter: "--"
        subpaths:
          - subpath: name/namePart
          - subpath: titleInfo/title
          - subpath: topic
          - subpath: geographic
          - subpath: temporal
          - subpath: genre
      - path: relatedItem/subject
        attribute: authority
        attribute-value: fast
        delimiter: "--"
        subpaths:
          - subpath: name/namePart
          - subpath: titleInfo/title
          - subpath: topic
          - subpath: geographic
          - subpath: temporal
          - subpath: genre
      - path: subject
        attribute: '!authority'
        attribute-value:
        delimiter: "--"
        subpaths:
          - subpath: name/namePart
          - subpath: titleInfo/title
          - subpath: topic
          - subpath: geographic
          - subpath: temporal
          - subpath: genre
      - path: relatedItem/subject
        attribute: '!authority'
        attribute-value:
        delimiter: "--"
        subpaths:
          - subpath: name/namePart
          - subpath: titleInfo/title
          - subpath: topic
          - subpath: geographic
          - subpath: temporal
          - subpath: genre

- spotlight-field: subjects_tesim
  multivalue-breaks: "yes"
  mods:
      - path: subject
        attribute: authority
        attribute-value: lcsh
        delimiter: "--"
        subpaths:
          - subpath: name/namePart
          - subpath: titleInfo/title
          - subpath: topic
          - subpath: geographic
          - subpath: temporal
          - subpath: genre
      - path: relatedItem/subject
        attribute: authority
        attribute-value: lcsh
        delimiter: "--"
        subpaths:
          - subpath: name/namePart
          - subpath: titleInfo/title
          - subpath: topic
          - subpath: geographic
          - subpath: temporal
          - subpath: genre
      - path: subject
        attribute: authority
        attribute-value: mesh
        delimiter: "--"
        subpaths:
          - subpath: name/namePart
          - subpath: titleInfo/title
          - subpath: topic
          - subpath: geographic
          - subpath: temporal
          - subpath: genre
      - path: relatedItem/subject
        attribute: authority
        attribute-value: mesh
        delimiter: "--"
        subpaths:
          - subpath: name/namePart
          - subpath: titleInfo/title
          - subpath: topic
          - subpath: geographic
          - subpath: temporal
          - subpath: genre
      - path: subject
        attribute: authority
        attribute-value: fast
        delimiter: "--"
        subpaths:
          - subpath: name/namePart
          - subpath: titleInfo/title
          - subpath: topic
          - subpath: geographic
          - subpath: temporal
          - subpath: genre
      - path: relatedItem/subject
        attribute: authority
        attribute-value: fast
        delimiter: "--"
        subpaths:
          - subpath: name/namePart
          - subpath: titleInfo/title
          - subpath: topic
          - subpath: geographic
          - subpath: temporal
          - subpath: genre
      - path: subject
        attribute: '!authority'
        attribute-value:
        delimiter: "--"
        subpaths:
          - subpath: name/namePart
          - subpath: titleInfo/title
          - subpath: topic
          - subpath: geographic
          - subpath: temporal
          - subpath: genre
      - path: relatedItem/subject
        attribute: '!authority'
        attribute-value:
        delimiter: "--"
        subpaths:
          - subpath: name/namePart
          - subpath: titleInfo/title
          - subpath: topic
          - subpath: geographic
          - subpath: temporal
          - subpath: genre
        
- spotlight-field: genre_tesim
  multivalue-breaks: "yes"
  xpath:
      - xpath-value: "//mods:genre"

- spotlight-field: genre_ssim
  multivalue-breaks: "yes"
  xpath:
      - xpath-value: "//mods:genre"

- spotlight-field: places_tesim
  multivalue-breaks: "yes"
  mods:
      - path: subject/hierarchicalGeographic
        delimiter: "--"
        subpaths:
          - subpath: continent
          - subpath: country
          - subpath: region
          - subpath: state
          - subpath: territory
          - subpath: county
          - subpath: city
          - subpath: island
          - subpath: area
          - subpath: extraterrestrialArea
          - subpath: citySection
      - path: location/physicalLocation
        delimiter: "--"
        attribute: type
        attribute-value: ('!repository' OR '!container')

- spotlight-field: places_ssim
  multivalue-breaks: "yes"
  mods:
      - path: subject/hierarchicalGeographic
        delimiter: "--"
        subpaths:
          - subpath: continent
          - subpath: country
          - subpath: region
          - subpath: state
          - subpath: territory
          - subpath: county
          - subpath: city
          - subpath: island
          - subpath: area
          - subpath: extraterrestrialArea
          - subpath: citySection
      - path: location/physicalLocation
        delimiter: "--"
        attribute: type
        attribute-value: ('!repository' OR '!container')
        
#  Added for BTA, but could be useful for other collections' ArchivesSpace content. This will only select the top-level--i.e., component--ArchivesSpace Component Unique Identifier.
- spotlight-field: unit-id_tesim
  multivalue-breaks: "yes"
  mods:
      - path: identifier
        attribute: type
        attribute-value: unit id
        
- spotlight-field: attribution_tesim
  multivalue-breaks: "yes"
  mods:
      - path: note
        attribute: type
        attribute-value: statement of responsibility
        
- spotlight-field: in-collection_tesim
  delimiter: ", "
  xpath:
      - xpath-value: "//mods:relatedItem[@displayLabel='collection']/mods:titleInfo/mods:title"
      - xpath-value: "//mods:relatedItem[@displayLabel='collection']/mods:identifier"      
          
- spotlight-field: collection_ssim
  xpath:
      - xpath-value: "//mods:relatedItem[@displayLabel='collection']/mods:titleInfo/mods:title" 

- spotlight-field: cite-as_tesim
  multivalue-breaks: "yes"
  mods:
      - path: note
        attribute: type
        attribute-value: preferred citation

# Added for BTA
- spotlight-field: source-characteristics_tesim
  multivalue-breaks: "yes"
  mods:
      - path: note
        attribute: type
        attribute-value: source characteristics

# Added for BTA. Will only pick up the note in the immediate parent of the leaf node
- spotlight-field: issuing-body_tesim
  multivalue-breaks: "yes"
  mods:
      - path: relatedItem/note
        attribute: displayLabel
        attribute-value: Issuing Body Note

- spotlight-field: biographical-historical-note_tesim
  multivalue-breaks: "yes"
  mods:
      - path: note
        attribute: type
        attribute-value: biographical/historical
      - path: relatedItem/note
        attribute: type
        attribute-value: biographical/historical

- spotlight-field: note_tesim
  multivalue-breaks: "yes"
  xpath:
      - xpath-value: "//mods:note[not(@type='statement of responsibility' or @type='organization' or @type='preferred citation' or @type='source characteristics' or @type='biographical/historical' or @displayLabel='Issuing Body Note')]"

- spotlight-field: source-institution-copy_tesim
  delimiter: ": "
  xpath:
      - xpath-value: "//mods:relatedItem[@displayLabel='Source Institution Digitization']/mods:titleInfo/mods:title"
      - xpath-value: "//mods:relatedItem[@displayLabel='Source Institution Digitization']/mods:location/mods:url"

- spotlight-field: thumbnail_url_ssm
  xpath:
      - xpath-value: "(//mods:location/mods:url[@access='preview'])[1]"

# This helps, but it can result in thumbnail and full being for different resources

- spotlight-field: full_image_url_ssm
  xpath:
      - xpath-value: "(//mods:location/mods:url[@access='raw object'])[1]"
        
- spotlight-field: additional-digital-items_tesim
  multivalue-breaks: "yes"
  xpath:
      - xpath-value: "(//mods:location/mods:url[@access='raw object'])[position()>1]"

- spotlight-field: rights_tesim
  mods:
      - path: accessCondition
      - path: relatedItem/accessCondition
       
- spotlight-field: record-id_tesim
  mods:
      - path: recordInfo/recordIdentifier

- spotlight-field: available-to_tesim
  multivalue-breaks: "yes"
  xpath: 
      - xpath-value: "//librarycloud:availableTo"
        xpath-namespace-prefix: "librarycloud"
        xpath-namespace-def: "http://hul.harvard.edu/ois/xml/ns/librarycloud"

- spotlight-field: available-to_ssim
  multivalue-breaks: "yes"
  xpath: 
      - xpath-value: "//librarycloud:availableTo"
        xpath-namespace-prefix: "librarycloud"
        xpath-namespace-def: "http://hul.harvard.edu/ois/xml/ns/librarycloud"

- spotlight-field: hollis-record_tesim
  xpath:
      - xpath-value: "//mods:relatedItem[@otherType='HOLLIS record' or @otherType='HOLLIS Images record']/mods:location/mods:url"  
   
#  For each collection with object-in-context URLs, add a permalink spotlight field modeled on Studies in Scarlet, below,
#    replacing "Studies in Scarlet" with the value of the displayLabel attribute for the collection.
#
#

- spotlight-field: permalink-amw_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Anna May Wong Abroad, 1928-1936']"  

- spotlight-field: permalink-bac_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Berenson Art Collection']"  

- spotlight-field: permalink-botanicals_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Botanical Illustrations']"  

- spotlight-field: permalink-brewster_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='William Brewster']" 

- spotlight-field: permalink-bta_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='The Black Teacher Archive']"  

- spotlight-field: permalink-bls_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Boston Latin School']"  

- spotlight-field: permalink-buttons_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Political Buttons']"  

- spotlight-field: permalink-channing_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='The William Ellery Channing Collection']"  

- spotlight-field: permalink-citymaps_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='City Maps and Urban Environments']"

- spotlight-field: permalink-contagion_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Contagion: Historical Views of Diseases and Epidemics']" 

- spotlight-field: permalink-coptica_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Coptica at Harvard']" 
      
- spotlight-field: permalink-crb_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Chinese Rare Books']"  

- spotlight-field: permalink-crimes_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='English Crime and Execution Broadsides']"

- spotlight-field: permalink-cte_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='The Cuban Teachers Expedition of 1900']"

- spotlight-field: permalink-currency_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='American Currency']"  

- spotlight-field: permalink-dag_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Daguerreotypes at Harvard']"

- spotlight-field: permalink-epj_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Early Photography of Japan']"

- spotlight-field: permalink-exp_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Expeditions and Discoveries: Sponsored Exploration and Scientific Discovery in the Modern Age']"
      
- spotlight-field: permalink-franceinamerica_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='France in the Americas']"

- spotlight-field: permalink-forgotten_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='The Forgotten Cities: Early Christian Architecture in Greater Syria']"

- spotlight-field: permalink-ham_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Harvard Art Museums']"

- spotlight-field: permalink-hedda_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Hedda Morrison Photographs of China']"      

- spotlight-field: permalink-horblit_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Harrison D. Horblit Collection of Early Photography']"

- spotlight-field: permalink-ihp_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Islamic Heritage Project']" 

- spotlight-field: permalink-immigration_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Immigration to the United States, 1789-1930']"

- spotlight-field: permalink-jeffry_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='In Black and White: Photographs of Black Theater by Alix Jeffry']"

- spotlight-field: permalink-kurdish_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Kurdish People of the Near East']"

- spotlight-field: permalink-lap_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Latin American Pamphlet Digital Collection']"

- spotlight-field: permalink-maps_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Scanned Maps']"  

- spotlight-field: permalink-medmss_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Medieval & Renaissance Manuscripts']"

- spotlight-field: permalink-pickens_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Claude L. Pickens, Jr. Collection of Photographs: Muslims in China']"

- spotlight-field: permalink-reading_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Reading: Harvard Views of Readers, Readership, and Reading History']"

- spotlight-field: permalink-rubbings_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Chinese Rubbings Collection']"  
      
- spotlight-field: permalink-saef_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Slavery, Abolition, Emancipation and Freedom: Primary Sources from Houghton Library']"

- spotlight-field: permalink-sba_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Susan B. Anthony: Papers at Schlesinger Library']"

- spotlight-field: permalink-scarlet_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Studies in Scarlet: Marriage and Sexuality in the U.S. & U.K., 1815-1914']"  

- spotlight-field: permalink-scores_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Digital Scores and Libretti']"

- spotlight-field: permalink-pins_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Soviet and Post-Soviet Lapel Pins']"

- spotlight-field: permalink-salt_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Salt Prints']"

- spotlight-field: permalink-ssb_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='The South Sea Bubble, 1720']"

- spotlight-field: permalink-story_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Joseph Story: Manuscripts, Correspondence, and Visual Materials']"

- spotlight-field: permalink-ward_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Artemas Ward House and Its Collections']"
      
- spotlight-field: permalink-wave_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Catching the Wave']"

- spotlight-field: permalink-woc_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Worlds of Change']"  

- spotlight-field: permalink-ww_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='Women Working, 1800-1930']"  

- spotlight-field: permalink-wwwk_tesim
  xpath:
      - xpath-value: "//mods:url[@displayLabel='What Women Want To Know']"  
